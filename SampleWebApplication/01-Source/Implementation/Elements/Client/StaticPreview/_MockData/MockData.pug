-
	!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MockData=t():e.MockData=t()}(globalThis,(()=>(()=>{"use strict";var e,t={d:(e,r)=>{for(var a in r)t.o(r,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:r[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};t.r(r),t.d(r,{default:()=>v}),function(e){let t,r,a,n,i;!function(e){e.TYPE=String,e.REQUIRED=!0,e.MINIMAL_CHARACTERS_COUNT=1}(t=e.ID||(e.ID={})),function(e){e.TYPE=String,e.REQUIRED=!0,e.MINIMAL_CHARACTERS_COUNT=2,e.MAXIMAL_CHARACTERS_COUNT=255}(r=e.Name||(e.Name={})),function(e){e.TYPE=String,e.REQUIRED=!0,e.MINIMAL_CHARACTERS_COUNT=2,e.MAXIMAL_CHARACTERS_COUNT=500}(a=e.Description||(e.Description={})),function(e){e.TYPE=Object,e.REQUIRED=!1}(n=e.Category||(e.Category={})),function(e){e.TYPE=Number,e.REQUIRED=!0,e.MINIMAL_VALUE=1,e.MAXIMAL_VALUE=Number.MAX_SAFE_INTEGER}(i=e.Price__Yen__IncludingTax||(e.Price__Yen__IncludingTax={}))}(e||(e={}));const a=e;var n;!function(e){let t,r;!function(e){e.TYPE=String,e.REQUIRED=!0,e.MINIMAL_CHARACTERS_COUNT=1}(t=e.ID||(e.ID={})),function(e){e.TYPE=String,e.REQUIRED=!0,e.MINIMAL_CHARACTERS_COUNT=2,e.MAXIMAL_CHARACTERS_COUNT=255}(r=e.Name||(e.Name={}))}(n||(n={}));const i=n;function o(e){return null!==e}function c(e){return void 0!==e}function l(e,t){return void 0===e?t:e}function s(e,t){return t?e.toString():""}function m(e){return"string"==typeof e}function u(e){if(m(e))return e;if("number"==typeof e||"boolean"==typeof e||null==e)return String(e);var t;if(e instanceof Error)return String(e);if(e instanceof RegExp)return e.toString();if("object"==typeof(t=e)&&null!==t)try{let t;return t=e instanceof Set?JSON.stringify(Array.from(e),null,2):e instanceof Map?JSON.stringify(Object.fromEntries(e),null,2):JSON.stringify(e,null,2),"{}"===t?"{}":"[]"===t?"[]":t}catch(t){return String(e)}return String(e)}class d{static setImplementation(e){return d.implementation=e,d}static setLocalization(e){return d.localization=e,d}static throwErrorAndLog(e){if(o(d.implementation))return d.implementation.throwErrorAndLog(e);if("errorInstance"in e)throw e.errorInstance.message=`${e.title}\n${e.errorInstance.message}\n\n${d.localization.occurrenceLocation}: ${e.occurrenceLocation}${s(`\n\n${d.localization.wrappableError}:\n${u(e.wrappableError)}`,c(e.wrappableError))}${s(`\n\n${d.localization.appendedData}:\n${u(e.additionalData)}`,c(e.additionalData))}\n`,e.errorInstance;const t=new Error(e.description);throw t.name=e.errorType,t}static logError(e){o(d.implementation)?d.implementation.logError(e):console.error(`[ ${l(e.customBadgeText,d.localization.badgesDefaultTitles.error)} ] ${e.title}\n${e.description}\n\n${d.localization.errorType}: ${e.errorType}\n${d.localization.occurrenceLocation}: ${e.occurrenceLocation}${s(`\n\n${d.localization.caughtError}:\n${u(e.caughtError)}`+(e.caughtError instanceof Error?`\n${e.caughtError.stack}`:""),c(e.caughtError))}${s(`\n\n${d.localization.appendedData}:\n${u(e.additionalData)}`,c(e.additionalData))}`)}static logErrorLikeMessage(e){o(d.implementation)?d.implementation.logErrorLikeMessage(e):console.error(d.formatGenericLog(e,d.localization.badgesDefaultTitles.error))}static logWarning(e){o(d.implementation)?d.implementation.logWarning(e):console.warn(`[ ${l(e.customBadgeText,d.localization.badgesDefaultTitles.warning)} ] ${e.title}\n${e.description}\n\n${s(`${d.localization.occurrenceLocation}: ${e.occurrenceLocation}`,c(e.occurrenceLocation))}\n\n${s(`${d.localization.appendedData}: ${u(e.additionalData)}`,c(e.additionalData))}`)}static logInfo(e){o(d.implementation)?d.implementation.logInfo(e):console.info(d.formatGenericLog(e,d.localization.badgesDefaultTitles.info))}static logSuccess(e){o(d.implementation)?d.implementation.logSuccess(e):console.info(d.formatGenericLog(e,d.localization.badgesDefaultTitles.success))}static highlightText(e){return o(d.implementation)?d.implementation.highlightText(e):e}static formatGenericLog(e,t){return`[ ${l(e.customBadgeText,t)} ] ${e.title}\n${e.description}\n\n${s(`${d.localization.appendedData}: ${u(e.additionalData)}`,c(e.additionalData))}`}}d.implementation=null,d.localization={badgesDefaultTitles:{error:"Error",warning:"Warning",success:"Success",info:"Info"},errorType:"Error type",occurrenceLocation:"Occurrence location",caughtError:"Caught error",wrappableError:"Wrappable error",appendedData:"Appended data"};const p=d;class g extends Error{constructor(e){super(),this.name=g.NAME,this.message="customMessage"in e?e.customMessage:g.localization.generateDescription(e)}}g.NAME="InvalidParameterValueError",g.localization={defaultTitle:"Invalid parameter value",generateDescription:e=>`The value of parameter No. ${e.parameterNumber} (commonly named as '${e.parameterName}')' is invalid.${function(e,t={}){return null==e||!1===t.condition?"":void 0===t.modifier?e.toString():t.modifier(e.toString())}(e.messageSpecificPart,{modifier:e=>`\n${e}`})}`};const f=g,h=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],C=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],I=["0","1","2","3","4","5","6","7","8","9"];function A(e){return void 0===e}function y(e){return"string"==typeof e&&e.length>0?e:""}function x({minimalValue:e,maximalValue:t}){return Math.floor(Math.random()*(t-e+1)+e)}function T(e){return e[x({minimalValue:0,maximalValue:e.length-1})]}class E extends Error{constructor(e){super(),this.name=E.NAME,this.message="customMessage"in e?e.customMessage:E.localization.generateDescription(e)}}E.NAME="IncompatiblePropertiesError",E.localization={defaultTitle:"Incompatible properties in object-type parameter",generateDescription:e=>`In parameter '${e.parameterName}, property '${e.conflictingPropertyName}' is incompatible with properties:${e.incompatiblePropertiesNames.reduce(((e,t)=>`${e}\n- ${t}`),"")}`};const _=E;class S{static getRandomString(e){const t=y(e.prefix),r=y(e.infix),a=y(e.postfix),n=t.length+r.length+a.length;let i;if(A(e.fixedCharactersCount)){const o=S.getMinimalCharactersCount({prefixInfixAndPostfixTotalCharactersCount:n,minimalCharactersCount__explicitlySpecified:e.minimalCharactersCount,fixedCharactersCount__explicitlySpecified:e.fixedCharactersCount,minimalRandomlyGeneratedCharactersCount__explicitlySpecified:e.minimalRandomlyGeneratedCharactersCount}),c=n+l(e.minimalRandomlyGeneratedCharactersCount,0)<=o?o-n:l(e.minimalRandomlyGeneratedCharactersCount,0);i=x({minimalValue:c,maximalValue:S.getMaximalCharactersCont({...e,minimalCharactersCount:o,prefix:t,infix:r,postfix:a,minimalRandomlyGeneratedCharactersCount:c})-n})}else i=e.fixedCharactersCount-n-l(e.minimalRandomlyGeneratedCharactersCount,0);let o="";const c=S.getCharactersForRandomStringGeneration(e.allowedCharacters);for(let e=o.length;e<i;e++)o=`${o}${T(c)}`;if(r.length>0){const e=x({minimalValue:1,maximalValue:o.length-2}),t=o.slice(0,e),a=o.slice(e);o=`${t}${r}${a}`}return`${t}${o}${a}`}static setLocalization(e){S.localization=e}static getMinimalCharactersCount({prefixInfixAndPostfixTotalCharactersCount:e,minimalCharactersCount__explicitlySpecified:t,fixedCharactersCount__explicitlySpecified:r,minimalRandomlyGeneratedCharactersCount__explicitlySpecified:a}){if(A(t))return e+l(a,0);c(r)&&p.throwErrorAndLog({errorInstance:new _({parameterName:"parametersObject",conflictingPropertyName:"fixedCharactersCount__explicitlySpecified",incompatiblePropertiesNames:["minimalCharactersCount__explicitlySpecified"]}),title:_.localization.defaultTitle,occurrenceLocation:"getRandomString(parametersObject)"}),t<0&&p.throwErrorAndLog({errorInstance:new f({parameterNumber:1,parameterName:"parametersObject.minimalCharactersCount",messageSpecificPart:S.localization.errors.minimalCharactersCountMustBeGreaterThan0(t)}),title:f.localization.defaultTitle,occurrenceLocation:"RandomStringsGenerator.getRandomString(parametersObject)"});const n=e+l(a,0);return t>=n?t:n}static getMaximalCharactersCont(e){if(A(e.maximalCharactersCount))return S.DEFAULT_MAXIMAL_TO_MINIMAL_CHARACTERS_COUNT_RATIO*e.minimalCharactersCount;c(e.fixedCharactersCount)&&p.throwErrorAndLog({errorInstance:new _({parameterName:"namedParameters",conflictingPropertyName:"fixedCharactersCount",incompatiblePropertiesNames:["maximalCharactersCount"]}),title:_.localization.defaultTitle,occurrenceLocation:"getRandomString(namedParameters)"});const t=e.maximalCharactersCount;return e.prefix.length+e.infix.length+e.postfix.length+e.minimalRandomlyGeneratedCharactersCount>t?p.throwErrorAndLog({errorInstance:new f({parameterNumber:1,parameterName:"namedParameters.minimalCharactersCount",messageSpecificPart:S.localization.errors.sumOfCharactersCountOfAffixesAndMinimalRandomlyGeneratedCharactersCountIsExceedsMaximalCharactersCount(e)}),title:f.localization.defaultTitle,occurrenceLocation:"RandomStringsGenerator.getRandomString(namedParameters)"}):e.minimalCharactersCount>t&&p.throwErrorAndLog({errorInstance:new f({parameterNumber:1,parameterName:"namedParameters.minimalCharactersCount",messageSpecificPart:S.localization.errors.explicitlySpecifiedMinimalCharactersCountExceedsMaximalCharactersCount({minimalCharactersCount:e.minimalCharactersCount,maximalCharactersCount:t})}),title:f.localization.defaultTitle,occurrenceLocation:"RandomStringsGenerator.getRandomString(namedParameters)"}),t}static getCharactersForRandomStringGeneration(e={latinUppercase:!0,latinLowercase:!0,digits:!0}){const t=[];!0===e.latinUppercase&&t.push(...C),!0===e.latinLowercase&&t.push(...h),!0===e.digits&&t.push(...I);const r=[];if(Array.isArray(e.other))for(const e of r)r.push(...e.split(""));else m(e.other)&&r.push(...e.other.split(""));return t.push(...r),0===t.length&&p.throwErrorAndLog({errorInstance:new f({parameterName:"parametersObject.allowedCharacters",customMessage:S.localization.errors.noAllowedCharactersForRandomGeneration}),title:f.localization.defaultTitle,occurrenceLocation:"RandomStringsGenerator.getRandomString(parametersObject)"}),t}}S.localization={errors:{minimalCharactersCountMustBeGreaterThan0:e=>`The 'minimalCharactersCount' property must be greater than 0 while really it's ${e}`,sumOfCharactersCountOfAffixesAndMinimalRandomlyGeneratedCharactersCountIsExceedsMaximalCharactersCount:e=>`The sum of characters count of 'prefix', 'infix' and 'postfix' and also 'minimalRandomlyGeneratedCharactersCount' are exceeds the 'maximalCharactersCount':\n                          prefix.length: ${e.prefix.length}                           infix.length: ${e.infix.length}                         postfix.length: ${e.postfix.length}minimalRandomlyGeneratedCharactersCount: ${e.minimalRandomlyGeneratedCharactersCount}                               SUBTOTAL: ${e.prefix.length+e.infix.length+e.postfix.length+e.minimalRandomlyGeneratedCharactersCount}                 maximalCharactersCount: ${e.maximalCharactersCount}`,explicitlySpecifiedMinimalCharactersCountExceedsMaximalCharactersCount:({minimalCharactersCount:e,maximalCharactersCount:t})=>`The explicitly specified minimal characters count (${e}) exceeds the maximal characters count ${t}`,noAllowedCharactersForRandomGeneration:"No characters for the random string generation has been allowed allowed.Check the 'parametersObject.allowedCharacters' and satisfy at least on of below conditions:\n  * Set 'latinUppercase' property to true\n  * Set 'latinLowercase' property to true\n  * Set 'digits' property to true\n  * Set 'other' property to non-empty array\n"}},S.DEFAULT_MAXIMAL_TO_MINIMAL_CHARACTERS_COUNT_RATIO=2;const M=S.getRandomString;function N(...e){return e.reduce(((e,t)=>e+t))/e.length}class R{static generate({preDefinedFields:e,dependencies:t,options:r={}}){0===t.categories.length&&p.throwErrorAndLog({errorInstance:new f({parameterNumber:1,parameterName:"namedParameters",messageSpecificPart:"The 'dependencies.categories' property must the non-empty array."}),title:f.localization.defaultTitle,occurrenceLocation:"ProductMocker.generate()"});const n=e.ID??R.generateID(),i=e.name??M({minimalCharactersCount:a.Name.MINIMAL_CHARACTERS_COUNT,maximalCharactersCount:a.Name.MAXIMAL_CHARACTERS_COUNT,...c(r.nameInfixForSearchingImitation)?{infix:r.nameInfixForSearchingImitation}:null,minimalRandomlyGeneratedCharactersCount:N(a.Name.MINIMAL_CHARACTERS_COUNT,a.Name.MAXIMAL_CHARACTERS_COUNT)}),o=!0===(m={preferentialValue:e.description,randomValueGenerator:()=>M({minimalCharactersCount:a.Description.MINIMAL_CHARACTERS_COUNT,maximalCharactersCount:a.Description.MAXIMAL_CHARACTERS_COUNT}),allOptionalsAreDemanded:!0===r.allOptionals}).mustReturnNonUndefinedValueIf?null!==(u=m.preferentialValue)&&void 0!==u?u:m.randomValueGenerator():c(m.preferentialValue)?m.preferentialValue:m.allOptionalsAreDemanded||Math.random()>=.5?m.randomValueGenerator():void 0,l=c(e.category)?e.category:T(t.categories),s=e.price__yen__includingTax??x({minimalValue:a.Price__Yen__IncludingTax.MINIMAL_VALUE,maximalValue:a.Price__Yen__IncludingTax.MAXIMAL_VALUE});var m,u;return{ID:n,name:i,...c(o)?{description:o}:null,category:l,price__yen__includingTax:s}}static generateID(){return R.counterForUniqueID_Generating=R.counterForUniqueID_Generating+1,M({prefix:String(R.counterForUniqueID_Generating),minimalCharactersCount:i.ID.MINIMAL_CHARACTERS_COUNT})}}R.counterForUniqueID_Generating=0;const D=class{static generate({mockingOrder:e,dependencies:t}){const r=[];for(const a of e){const e="quantity"in a?a.quantity:a.withNames.length;for(let n=1;n<=e;n++)r.push(R.generate({preDefinedFields:{..."withNames"in a?{name:a.withNames[n-1]}:null},dependencies:{categories:t.categories},options:{allOptionals:a.allOptionals,..."nameInfixForSearchingImitation"in a?{nameInfixForSearchingImitation:a.nameInfixForSearchingImitation}:null}}))}return r}};class L{static generate(e,t={}){return{ID:e.ID??L.generateID(),name:e.name??M({minimalCharactersCount:i.Name.MINIMAL_CHARACTERS_COUNT,maximalCharactersCount:i.Name.MAXIMAL_CHARACTERS_COUNT,...c(t.nameInfixForSearchingImitation)?{infix:t.nameInfixForSearchingImitation}:null,minimalRandomlyGeneratedCharactersCount:N(i.Name.MINIMAL_CHARACTERS_COUNT,i.Name.MAXIMAL_CHARACTERS_COUNT)})}}static generateID(){return L.counterForID_Generating=L.counterForID_Generating+1,M({prefix:String(L.counterForID_Generating),minimalCharactersCount:i.ID.MINIMAL_CHARACTERS_COUNT})}}L.counterForID_Generating=0;const b=class{static generate(e){const t=[];for(const r of e){const e="quantity"in r?r.quantity:r.withNames.length;for(let a=1;a<=e;a++)t.push(L.generate("withNames"in r?{name:r.withNames[a-1]}:{},"nameInfixForSearchingImitation"in r?{nameInfixForSearchingImitation:r.nameInfixForSearchingImitation}:{}))}return t}};class w extends Error{constructor(e){super(),this.name=w.NAME,this.message=e}}w.NAME="UnexpectedEventError",w.localization={defaultTitle:"Unexpected event occurred"};const O=w;function $(e,t,{mustThrowErrorIfElementNotFoundOrMoreThan1:r}={}){const a=e.filter(t);return 0===a.length?(!0===r&&p.throwErrorAndLog({errorInstance:new O("Array element satisfies to specified predicate not found."),title:O.localization.defaultTitle,occurrenceLocation:"getArrayElementSatisfiesThePredicateIfSuchElementIsExactlyOne(targetArray, predicate, options)"}),null):a.length>1?(!0===r&&p.throwErrorAndLog({errorInstance:new O("There are multiple elements satisfies the predicate. As it follows from the function name, two or more matches case is being considered as unexpected event."),title:O.localization.defaultTitle,occurrenceLocation:"getArrayElementSatisfiesThePredicateIfSuchElementIsExactlyOne(targetArray, predicate, options)"}),null):a[0]}function U(e,t){const r=[];return e.forEach(((e,a)=>{t(e)&&r.push(a)})),r}function P(e){const{targetArray:t,mutably:r}=e,a=new Map,n=[];let i;i="replacements"in e?e.replacements:"newValue"in e?[{predicate:e.predicate,newValue:e.newValue}]:[{predicate:e.predicate,replacer:e.replacer}];for(const e of i){const r=U(t,e.predicate);for(const i of r)n.includes(i)||n.push(i),a.set(i,"newValue"in e?e.newValue:e.replacer(t[i]))}const o=r?t:[...e.targetArray];for(const[e,t]of a)o[e]=t;return{updatedArray:o,indexesOfReplacedElements:n}}function z(e){const{targetArray:t,mutably:r}=e,a=t.length,n="number"==typeof e.indexes?[e.indexes]:[...e.indexes].sort(((e,t)=>e-t)).reverse(),i=[],o=[],c=r?t:[...e.targetArray];for(const e of n)"number"==typeof(l=e)&&Number.isInteger(l)&&l>=0?e>=a?p.logError({errorType:f.NAME,title:f.localization.defaultTitle,description:f.localization.generateDescription({parameterNumber:1,parameterName:"namedParameters.indexes",messageSpecificPart:`The index ${e} is greater than index of last element of target array therefore will be ignored.`}),occurrenceLocation:"removeArrayElementsByIndexes(namedParameters)"}):o.includes(e)||(i.push(c.splice(e,1)[0]),o.push(e)):p.logError({errorType:f.NAME,title:f.localization.defaultTitle,description:f.localization.generateDescription({parameterNumber:1,parameterName:"namedParameters.indexes",messageSpecificPart:`The index ${String(e)} is not the non-negative integer therefore will be ignored.`}),occurrenceLocation:"removeArrayElementsByIndexes(namedParameters)"});var l;return{updatedArray:c,removedElements:i.reverse()}}function G(e){const{targetArray:t,mutably:r}=e,a=[];for(const r of[..."predicates"in e?e.predicates:[e.predicate]])a.push(...U(t,r).filter((e=>!a.includes(e))));return{...z({...r?{mutably:!0,targetArray:t}:{mutably:!1,targetArray:t},indexes:a}),indexesOfRemovedElements:a.sort(((e,t)=>e-t))}}class F{static getInstance(){return null===F.selfSoleInstance&&(F.selfSoleInstance=new F,p.logSuccess({title:"Mock data source initialization complete",description:"Mock data source has been initialized. This feature must not be in production mode."})),F.selfSoleInstance}constructor(){this.categories=[],this.categoryUpdatingSubscribers=[],this.products=[],this.categories=b.generate([{withNames:["Beverages","Salads","Fish","Meat","Vegetarian","Bread","Milk products","High calories","Dessert"]},{nameInfixForSearchingImitation:"-SEARCHING_TEST-",quantity:3},{completelyRandom:!0,quantity:2}]),this.products=D.generate({mockingOrder:[{nameInfixForSearchingImitation:"テスト",allOptionals:!1,quantity:10},{completelyRandom:!0,allOptionals:!0,quantity:10},{completelyRandom:!0,allOptionals:!1,quantity:10}],dependencies:{categories:this.categories}})}addCategory(e){const t=L.generate(e);return this.categories.unshift(t),t.ID}updateCategory(e){const t=$(this.categories,(t=>t.ID===e.ID),{mustThrowErrorIfElementNotFoundOrMoreThan1:!0}),r={...e};P({targetArray:this.categories,predicate:t=>t.ID===e.ID,newValue:r,mutably:!0}),this.onCategoryHasBeenUpdated({newCategory:r,oldCategory:t})}onCategoryHasBeenUpdated(e){for(const t of this.categoryUpdatingSubscribers)t(e)}deleteCategory(e){G({targetArray:this.categories,predicate:t=>t.ID===e,mutably:!0})}addProduct(e){const t=R.generate({preDefinedFields:e,dependencies:{categories:this.categories},options:{allOptionals:!0}});return this.products.unshift(t),t.ID}updateProduct(e){const t={...$(this.products,(t=>t.ID===e.ID),{mustThrowErrorIfElementNotFoundOrMoreThan1:!0}),...c(e.name)?{name:e.name}:null,...c(e.description)?{description:e.description}:null,...c(e.price__yen__includingTax)?{price__yen__includingTax:e.price__yen__includingTax}:null,...c(e.categoryID)?{category:$(this.categories,(t=>t.ID===e.categoryID),{mustThrowErrorIfElementNotFoundOrMoreThan1:!0})}:null};P({targetArray:this.products,predicate:t=>t.ID===e.ID,newValue:t,mutably:!0})}deleteProduct(e){G({targetArray:this.products,predicate:t=>t.ID===e,mutably:!0})}}F.selfSoleInstance=null;const V=F.getInstance(),v={categories:V.categories,products:V.products};return r})()));

	const MockData = global.MockData.default;
